var b=null,p=false;if(!window.console||!window.console.log){window.console={};window.console.log=function(){};window.console.dir=function(){}}function x(g,l,j){g=g?g:0;if(l&&(!g||g>l))g=l;return j&&(!g||g>j)?j:g}function H(g){for(var l,j,h=g.length;h;l=parseInt(Math.random()*h,10),j=g[--h],g[h]=g[l],g[l]=j);}
function I(g,l,j){g=(g+"").replace(/[^0-9+\-Ee.]/g,"");g=!isFinite(+g)?0:+g;var h=!isFinite(+0)?0:Math.abs(0);l=typeof l==="undefined"?".":l;var d="";d=(h?function(y,q){var t=Math.pow(10,q);return""+Math.round(y*t)/t}(g,h):""+Math.round(g)).split(".");if(d[0].length>3)d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,typeof j==="undefined"?",":j);if((d[1]||"").length<h){d[1]=d[1]||"";d[1]+=Array(h-d[1].length+1).join("0")}return d.join(l)}
function S(g,l){function j(k,m){return(k+="").length<m?Array(++m-k.length).join("0")+k:k}var h,d,y=/\\?([a-z])/gi,q,t=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],B={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};q=function(k,m){return d[k]?d[k]():m};d={P:function(){return j(d.v(),2)},wa:function(){return d.ia().slice(0,3)},v:function(){return h.getDate()},ia:function(){return t[d.M()]+
"day"},W:function(){return d.M()||7},Ca:function(){return B[d.v()]||"th"},M:function(){return h.getDay()},db:function(){return Math.round((new Date(d.a(),d.f()-1,d.v())-new Date(d.a(),0,1))/864E5)+1},Y:function(){var k=new Date(d.a(),d.f()-1,d.v()-d.W()+3);return 1+Math.round((k-new Date(k.getFullYear(),0,4))/864E5/7)},V:function(){return t[6+d.f()]},ja:function(){return j(d.f(),2)},Aa:function(){return d.V().slice(0,3)},f:function(){return h.getMonth()+1},ab:function(){return(new Date(d.a(),d.f(),
0)).getDate()},za:function(){return(new Date(d.a(),1,29)).getMonth()===1|0},Ya:function(){var k=d.f(),m=d.Y();return d.a()+(k===12&&m<9?-1:k===1&&m>9)},a:function(){return h.getFullYear()},y:function(){return(d.a()+"").slice(-2)},Z:function(){return h.getHours()>11?"pm":"am"},ua:function(){return d.Z().toUpperCase()},va:function(){return j(Math.floor((h.getUTCHours()*3600+h.getUTCMinutes()*60+h.getUTCSeconds()+3600)/86.4)%1E3,3)},fa:function(){return d.N()%12||12},N:function(){return h.getHours()},
Oa:function(){return j(d.fa(),2)},xa:function(){return j(d.N(),2)},m:function(){return j(h.getMinutes(),2)},$a:function(){return j(h.getSeconds(),2)},r:function(){return j(h.getMilliseconds()*1E3,6)},Ma:function(){throw"Not supported (see source code of date() for timezone on how to add support)";},ya:function(){return 0+(new Date(d.a(),0)-Date.UTC(d.a(),0)!==new Date(d.a(),6)-Date.UTC(d.a(),6))},X:function(){var k=h.getTimezoneOffset();return(k>0?"-":"+")+j(Math.abs(k/60*100),4)},Ba:function(){var k=
d.X();return k.substr(0,3)+":"+k.substr(3,2)},Da:function(){return"UTC"},Fa:function(){return-h.getTimezoneOffset()*60},da:function(){return"Y-m-d\\Th:i:sP".replace(y,q)},J:function(){return"D, d M Y H:i:s O".replace(y,q)},Ea:function(){return h.getTime()/1E3|0}};this.ea=function(k,m){h=typeof m==="undefined"?new Date:m instanceof Date?new Date(m):new Date(m*1E3);return k.replace(y,q)};return this.ea(g,l)}var T=T||{};
(function(){function g(){var a;for(a=0;a<C;a+=1)D.push(a);H(D);u.S=parseInt(i.h/parseInt(C/T.g.u,10),10);J=window.setInterval(l,1E3/T.g.G)}function l(){var a=[],c=0,f=0,e=b,n=p;f=E+T.g.u;for(c=E;c<f;c+=1){e=D[c];e=r[e];var o=void 0,v=void 0,s=void 0;if(e){o=e.i;if(v=T.p.index[o]){s=document.createElement("div");s.setAttribute("id",o);s.style.backgroundImage="url("+T.L+"/mosaic.jpg)";s.style.backgroundPosition="-"+v[0]*12+"px -"+v[1]*12+"px";s.style.left=v[0]*12+"px";s.style.top=v[1]*12+"px";e=s}else e=
b}else e=b;if(e){a.push(e);n=true}}E=c;if(n){T.canvas.append("",a);if(u.l<i.h){u.l+=u.S;j()}}else{window.clearInterval(J);T.canvas.d("background","none");u.l=parseInt(i.h,10);j();q();m()}}function j(){u.canvas.text(I(u.l,T.T.La,T.T.bb))}function h(){w.n=$("#search-input");w.H=w.n.j();w.n.focus(function(){$(this).j()===w.H&&$(this).j("")});w.n.blur(function(){$(this).j()==""&&$(this).j(w.H)});$("#search-box").submit(function(){var a=w.n.j();if(a=="")return p;$("#search-box button").$("loading");$.O({url:"/tiles-by-username.php",
type:"GET",dataType:"json",data:{cb:a},qa:d});return p})}function d(a){var c;$("#search-box button").K("loading");if(a.q.total==0){$("#search-box .error").F("fast");window.setTimeout(function(){$("#search-box .error").Na("fast")},3E3)}else{a=a.q.U[0];c=a.i;$.extend(r[c],a);t();i.o=true;B(c);a=b}}function y(){var a;if(a=z[F]){F+=1;B(a.position)}else F=0}function q(){if(!T.s){y();T.s=window.setInterval(y,T.Ha*1E3)}}function t(){window.clearInterval(T.s);T.s=b}function B(a){var c,f,e=T.k,n,o,v,s;if((f=
r[a])&&e)if(c=T.p.index[a]){a=c[0];c=c[1];if(v=T.p.R[a][c]){if(c>24)if(a>24){n="bottom-right";o={top:"",right:564-a*12+"px",bottom:532-c*12+"px",left:""}}else{n="bottom-left";o={top:"",right:"",bottom:532-c*12+"px",left:a*12+2+"px"}}else if(a>24){n="top-right";o={top:c*12-16+"px",right:564-a*12+"px",bottom:"",left:""}}else{n="top-left";o={top:c*12-16+"px",right:"",left:a*12+8+"px",bottom:""}}e.e.t();s=S(T.T.Ka,f.da);e.ta.text(f.r).c("href","http://twitter.com/"+f.r);e.aa.c("title",f.r).c("href","http://twitter.com/"+
f.r);e.i.Pa(f.f.replace(/(ftp|http|https|file):\/\/([\S]+(\b|$))/gim,'<a href="$&" class="my_link" target="_blank">$2</a>').replace(/([^\/])(www[\S]+(\b|$))/gim,'$1<a href="http://$2" class="my_link" target="_blank">$2</a>').replace(/(^|\s)@(\w+)/g,'$1<a href="http://twitter.com/$2" class="my_link" target="_blank">@$2</a>').replace(/(^|\s)#(\S+)/g,'$1<a href="http://search.twitter.com/search?q=%23$2" class="my_link" target="_blank">#$2</a>'));e.sa.c("href","http://twitter.com/"+f.r+"/status/"+f.M).text(s);
e.ra.c("datetime",s);e.C.c("src","").t();e.e.d(o).K().$("bubble "+n+" color-"+v.J);T.A=window.setTimeout(function(){e.C.c("src",f.ja);e.C.load(function(){$(this).F("fast")});f=T.A=b},500);G.d({left:a*12+"px",top:c*12+"px","border-color":K[v.J]});e.e.show()}}}function k(){i.B=0;i.o=p;T.k.e.t();G.t();if(T.A){window.clearTimeout(T.A);T.A=b}}function m(){L=window.setInterval(W,1E3/T.g.z)}function W(){var a,c,f,e;if(i.D>=i.Q){c=A[0];i.D=0}i.D+=1;if(c){a=parseInt(c.i,10);if(!r[a]){A.shift();return}f={"background-image":"url(data:image/gif;base64,"+
c.P+")","background-position":"0px 0px"};c.ba=true;$.extend(r[a],c);z.shift();z.push({id:parseInt(c.m,10),position:a});A.shift();u.l+=1;j()}else{a=Math.floor(Math.random()*C);f=T.p.index[a];f=T.p.R[f[0]][f[1]];f={"background-image":"none","background-color":K[f.J]}}if(i.w>-1){c=r[i.w];e=$("#"+i.w);c.ba?e.d({"background-image":"url(data:image/gif;base64,"+c.P+")","background-position":"0px 0px"}):e.d({"background-image":"url("+T.L+"/mosaic.jpg)","background-position":"-"+e.d("left")+" -"+e.d("top")})}i.w=
a;$("#"+a).d(f)}function M(){N();O=window.setInterval(N,T.pa*1E3);window.location.href.indexOf("keepgoing")<0&&window.setTimeout(P,T.g.I*6E4)}function N(){$.O({url:"/poll.php",dataType:"json",data:{b:i.b},qa:function(a){if(a.q.b>i.b)i.b=a.q.b;i.h=a.q.h;A=A.concat(a.q.U.reverse());i.Q=Math.round(T.g.z*T.pa/A.length)}})}function P(){window.clearInterval(L);window.clearInterval(O);t()}var J,Q,R,O,E=0,F=0,r={},D=[],z=[],A=[],C=0,L,G=b,K=["#ACE8F1","#2D4891","#F7DC4B","#C52F14"],u={canvas:b,l:0,S:0},w=
{input:b,H:b},i={B:0,o:p,b:0,la:{},Qa:1,Q:0,D:0,h:0,w:-1};$.extend(T,{loading_message_seconds:2,polling_timer_seconds:180,auto_bubble_seconds:7,grid:[],index:[],init:function(){var a;T.g=T.oa.ga;if($.ca.Xa)T.g=T.oa.ka;else $.ca.Wa&&window.navigator.userAgent.search("Firefox/4")!=-1&&$("#download").remove();u.canvas=$("#twitter-counter dd span");G=$("#tile-hover");T.canvas=$("#mosaic");a=$("#bubble");T.k={e:a,ta:a.find("h1 a"),aa:a.find("a.twitter-avatar"),C:a.find("a.twitter-avatar > img"),ra:a.find("time"),
sa:a.find("time > a"),i:a.find("p")};i.la=T.canvas.na();h();$.O({url:T.L+"/mosaic.json",type:"GET",dataType:"jsonp",Ra:p});T.canvas.bind("mousemove",function(c){var f,e,n=T.canvas.na();window.clearTimeout(T.ma);window.clearTimeout(T.s);if(!i.o){f=Math.ceil((c.clientX+x(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0)-n.left)/12)-1;c=Math.ceil((c.clientY+x(window.pageYOffset?window.pageYOffset:0,document.documentElement?
document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)-n.top)/12)-1;if(!(f<0||c<0)){e=T.p.R[f][c];T.ma=window.setTimeout(function(){if(e){if(i.B!=e.m){i.B=e.m;B(e.m)}}else q()},50)}}});T.canvas.bind("mouseleave",function(){q()});T.canvas.bind("click",k);T.k.e.bind("click",function(c){c.stopPropagation();return c.target.nodeName.toLowerCase()=="a"||c.target.nodeName.toLowerCase()=="img"});T.k.e.bind("mouseenter",function(){i.o=true;t()});T.k.e.bind("mouseleave",function(){i.o=
p});T.ha=function(){return T}},getLastId:function(){return i.b},pause:P,resume:function(){m();M();q()},showBubble:B,performance:{},performance_settings:{ga:{G:8,u:15,z:8,I:10},ka:{G:4,u:30,z:6,I:10},Ua:{G:1,u:200,z:1,I:10}},state:i,new_tiles:A,loadingShow:function(){var a=$.Va($("#loading li")),c=0,f,e=0,n=$("#loading"),o;H(a);f=function(){$(a[c]).t();c+=1;if(c>=a.length)c=0;$(a[c]).show()};o=function(){n.d("background-position",-(e*240)+"px 0px");e+=1;if(e>=5)e=0};f();Q=window.setInterval(f,T.Ta*
1E3);o();R=window.setInterval(o,200)},processMosaic:function(a){window.clearInterval(Q);window.clearInterval(R);$("#loading").remove();if(a.b>i.b)i.b=a.b;r=a.U;for(var c in r)r[c].i&&z.push({id:parseInt(r[c].m,10),position:parseInt(r[c].i,10)});C=z.length;z.sort(function(f,e){return e.id-f.id});z=z.slice(0,199);i.h=a.h;w.n.c("disabled","").K("disabled");$("#search-box button").c("disabled","").K("disabled");g();M();a=b}})})();
for(var U=["assets/images/layout/bubbles.png"],V=U.length;V--;)(new Image).src=U[V];
$(document).Za(function(){var g=0,l=0;$("#flang").Ja(function(){window.location="/"+$(this).j()});$("#twitter-counter > dl > dt > a").click(function(){var j=(window.screen.width-550)/2,h=(window.screen.height-500)/2;window.open($(this).c("href"),"tweet","left="+j+",top="+h+",width=550,height=500,toolbar=0,resizable=1");return p});g=parseInt($("#brand em").width(),10)+20;l=parseInt($("#brand p").width(),10);$("#brand em").Ia('<span style="left:0; width:'+(l-g)/2+'px" />').F("slow");$("#brand em").Ga('<span style="right:0; width:'+
(l-g)/2+'px" />').F("slow");T.Sa();$('<img src="'+T.L+'/mosaic.jpg">').load(T.ha)});
